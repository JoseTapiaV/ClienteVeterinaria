{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../servicios/cita.service\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nconst _c0 = function (a1) {\n  return [\"/editar-cita/\", a1];\n};\nfunction CitasPage_ion_item_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 5)(1, \"ion-label\")(2, \"h5\");\n    i0.ɵɵelement(3, \"ion-icon\", 6);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵelement(6, \"ion-icon\", 7);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 8)(9, \"button\", 9);\n    i0.ɵɵelement(10, \"ion-icon\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function CitasPage_ion_item_8_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const cita_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.deleteCita(cita_r1.id));\n    });\n    i0.ɵɵelement(12, \"ion-icon\", 12);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const cita_r1 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", cita_r1.fecha, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", cita_r1.hora, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(3, _c0, cita_r1.id));\n  }\n}\nexport class CitasPage {\n  constructor(citaService, alertController) {\n    this.citaService = citaService;\n    this.alertController = alertController;\n    this.handlerMessage = '';\n    this.roleMessage = '';\n  }\n  ngOnInit() {\n    this.listAllCitas();\n  }\n  listAllCitas() {\n    this.citaService.getAll().snapshotChanges().pipe(map(changes => changes.map(c => Object.assign({\n      id: c.payload.doc.id\n    }, c.payload.doc.data())))).subscribe(data => {\n      this.citas = data;\n      console.log(this.citas);\n    });\n  }\n  deleteCita(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const alert = yield this.alertController.create({\n        header: '¿Esta seguro que desea eliminar el registro?',\n        buttons: [{\n          text: 'No',\n          role: 'cancel'\n        }, {\n          text: 'Si',\n          role: 'confirm',\n          handler: () => {\n            this.citaService.delete(id).then(() => {\n              this.listAllCitas();\n              console.log('Cita eliminada exitosamente!');\n            }).catch(err => console.log(err));\n          }\n        }]\n      });\n      yield alert.present();\n    });\n  }\n}\nCitasPage.ɵfac = function CitasPage_Factory(t) {\n  return new (t || CitasPage)(i0.ɵɵdirectiveInject(i1.CitaService), i0.ɵɵdirectiveInject(i2.AlertController));\n};\nCitasPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CitasPage,\n  selectors: [[\"app-citas\"]],\n  decls: 11,\n  vars: 1,\n  consts: [[1, \"ios\", \"list-ios\", \"hydrated\"], [1, \"ios\", \"hydrated\"], [\"class\", \"user-list\", 4, \"ngFor\", \"ngForOf\"], [\"expand\", \"full\", \"routerLink\", \"/crear-cita\", \"color\", \"primary\"], [\"name\", \"add-circle-outline\"], [1, \"user-list\"], [\"name\", \"person\"], [\"name\", \"call\"], [\"item-end\", \"\"], [\"ion-button\", \"\", \"clear\", \"\", 3, \"routerLink\"], [\"name\", \"create\", 2, \"zoom\", \"2.0\", \"background-color\", \"white\"], [\"ion-button\", \"\", \"clear\", \"\", 3, \"click\"], [\"name\", \"trash\", 2, \"zoom\", \"2.0\", \"background-color\", \"white\"]],\n  template: function CitasPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\");\n      i0.ɵɵtext(3, \" Citas Medicas App \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(4, \"ion-content\")(5, \"ion-list\", 0)(6, \"ion-list-header\", 1);\n      i0.ɵɵtext(7, \" Citas agendadas \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(8, CitasPage_ion_item_8_Template, 13, 5, \"ion-item\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"ion-button\", 3);\n      i0.ɵɵelement(10, \"ion-icon\", 4);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngForOf\", ctx.citas);\n    }\n  },\n  dependencies: [i3.NgForOf, i2.IonButton, i2.IonContent, i2.IonHeader, i2.IonIcon, i2.IonItem, i2.IonLabel, i2.IonList, i2.IonListHeader, i2.IonTitle, i2.IonToolbar, i2.RouterLinkDelegate, i4.RouterLink],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";AAEA,SAASA,GAAG,QAAQ,gBAAgB;;;;;;;;;;;;ICWhCC,mCAAuD;IAGjDA,8BAAmC;IAACA,YACtC;IAAAA,iBAAK;IACLA,yBAAG;IACDA,8BAAiC;IAACA,YACpC;IAAAA,iBAAI;IAENA,8BAAc;IAEVA,gCAA8E;IAChFA,iBAAS;IACTA,mCAAuD;IAA9BA;MAAA;MAAA;MAAA;MAAA,OAASA,4CAAmB;IAAA,EAAC;IACpDA,gCAA4E;IAC9EA,iBAAS;;;;IAZ6BA,eACtC;IADsCA,8CACtC;IAEoCA,eACpC;IADoCA,6CACpC;IAGyBA,eAAyC;IAAzCA,mEAAyC;;;ADZ1E,OAAM,MAAOC,SAAS;EAKpBC,YAAoBC,WAAwB,EACxBC,eAAgC;IADhC,gBAAW,GAAXD,WAAW;IACX,oBAAe,GAAfC,eAAe;IAJnC,mBAAc,GAAG,EAAE;IACnB,gBAAW,GAAG,EAAE;EAGwC;EAExDC,QAAQ;IACN,IAAI,CAACC,YAAY,EAAE;EACrB;EAEAA,YAAY;IACV,IAAI,CAACH,WAAW,CAACI,MAAM,EAAE,CAACC,eAAe,EAAE,CAACC,IAAI,CAC9CV,GAAG,CAACW,OAAO,IACTA,OAAO,CAACX,GAAG,CAACY,CAAC,IACXC;MAAGC,EAAE,EAAEF,CAAC,CAACG,OAAO,CAACC,GAAG,CAACF;IAAE,GAAKF,CAAC,CAACG,OAAO,CAACC,GAAG,CAACC,IAAI,EAAE,CAAG,CACpD,CACF,CACF,CAACC,SAAS,CAACD,IAAI,IAAG;MACjB,IAAI,CAACE,KAAK,GAAGF,IAAI;MACjBG,OAAO,CAACC,GAAG,CAAC,IAAI,CAACF,KAAK,CAAC;IACzB,CAAC,CAAC;EACJ;EAEMG,UAAU,CAACR,EAAU;;MACzB,MAAMS,KAAK,GAAG,MAAM,IAAI,CAAClB,eAAe,CAACmB,MAAM,CAAC;QAC9CC,MAAM,EAAE,8CAA8C;QACtDC,OAAO,EAAE,CACP;UACEC,IAAI,EAAE,IAAI;UACVC,IAAI,EAAE;SACP,EACD;UACED,IAAI,EAAE,IAAI;UACVC,IAAI,EAAE,SAAS;UACfC,OAAO,EAAE,MAAK;YACZ,IAAI,CAACzB,WAAW,CAAC0B,MAAM,CAAChB,EAAE,CAAC,CAACiB,IAAI,CAAC,MAAK;cACpC,IAAI,CAACxB,YAAY,EAAE;cACnBa,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;YAC7C,CAAC,CAAC,CAACW,KAAK,CAACC,GAAG,IAAIb,OAAO,CAACC,GAAG,CAACY,GAAG,CAAC,CAAC;UACnC;SACD;OAEJ,CAAC;MAEF,MAAMV,KAAK,CAACW,OAAO,EAAE;IACvB,CAAC;;;;mBA/CUhC,SAAS;AAAA;;QAATA,SAAS;EAAAiC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCXtBtC,kCAAY;MAGNA,mCACF;MAAAA,iBAAY;MAIhBA,mCAAa;MAGPA,iCACF;MAAAA,iBAAkB;MAClBA,qEAiBW;MACbA,iBAAW;MAEXA,qCAAmE;MACjEA,+BAA+C;MACjDA,iBAAa;;;MAtBgBA,eAAQ;MAARA,mCAAQ","names":["map","i0","CitasPage","constructor","citaService","alertController","ngOnInit","listAllCitas","getAll","snapshotChanges","pipe","changes","c","Object","id","payload","doc","data","subscribe","citas","console","log","deleteCita","alert","create","header","buttons","text","role","handler","delete","then","catch","err","present","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\rolan\\Desktop\\ClienteVeterinaria\\src\\app\\citas\\citas.page.ts","C:\\Users\\rolan\\Desktop\\ClienteVeterinaria\\src\\app\\citas\\citas.page.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { CitaService } from '../servicios/cita.service';\r\nimport { map } from 'rxjs/operators';\r\nimport { Cita } from '../entidades/Cita';\r\nimport { AlertController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-citas',\r\n  templateUrl: './citas.page.html',\r\n  styleUrls: ['./citas.page.scss'],\r\n})\r\nexport class CitasPage implements OnInit {\r\n  citas?:  any[];\r\n  handlerMessage = '';\r\n  roleMessage = '';\r\n\r\n  constructor(private citaService: CitaService,\r\n              private alertController: AlertController) { }\r\n\r\n  ngOnInit() {\r\n    this.listAllCitas();  \r\n  }\r\n\r\n  listAllCitas(){\r\n    this.citaService.getAll().snapshotChanges().pipe(\r\n      map(changes =>\r\n        changes.map(c =>\r\n          ({ id: c.payload.doc.id, ...c.payload.doc.data() })\r\n        )\r\n      )\r\n    ).subscribe(data => {\r\n      this.citas = data;\r\n      console.log(this.citas);\r\n    });\r\n  }\r\n\r\n  async deleteCita(id: string){    \r\n    const alert = await this.alertController.create({\r\n      header: '¿Esta seguro que desea eliminar el registro?',\r\n      buttons: [\r\n        {\r\n          text: 'No',\r\n          role: 'cancel',          \r\n        },\r\n        {\r\n          text: 'Si',\r\n          role: 'confirm',\r\n          handler: () => {\r\n            this.citaService.delete(id).then(() => {\r\n              this.listAllCitas();\r\n              console.log('Cita eliminada exitosamente!')\r\n            }).catch(err => console.log(err));\r\n          },\r\n        },\r\n      ],\r\n    });\r\n\r\n    await alert.present();    \r\n  }\r\n\r\n\r\n}\r\n","<ion-header>\r\n  <ion-toolbar>\r\n    <ion-title>\r\n      Citas Medicas App\r\n    </ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content>\r\n  <ion-list class=\"ios list-ios hydrated\">\r\n    <ion-list-header class=\"ios hydrated\">\r\n      Citas agendadas\r\n    </ion-list-header>\r\n    <ion-item *ngFor=\"let cita of citas\" class=\"user-list\">\r\n      <ion-label>\r\n        <h5>\r\n          <ion-icon name=\"person\"></ion-icon> {{cita.fecha}}\r\n        </h5>\r\n        <p>\r\n          <ion-icon name=\"call\"></ion-icon> {{cita.hora}}\r\n        </p>\r\n      </ion-label>\r\n      <div item-end>\r\n        <button ion-button clear [routerLink]=\"['/editar-cita/', cita.id]\">\r\n          <ion-icon name=\"create\" style=\"zoom:2.0; background-color: white;\"></ion-icon>\r\n        </button>\r\n        <button ion-button clear (click)=\"deleteCita(cita.id)\">\r\n          <ion-icon name=\"trash\" style=\"zoom:2.0; background-color: white\"></ion-icon>\r\n        </button>\r\n      </div>\r\n    </ion-item>\r\n  </ion-list>  \r\n  \r\n  <ion-button expand=\"full\" routerLink=\"/crear-cita\" color=\"primary\">\r\n    <ion-icon name=\"add-circle-outline\"></ion-icon>    \r\n  </ion-button>\r\n  \r\n</ion-content>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}